jQuery(function(e){var t={instances:{},disableddates:[],ready:function(){var a=t;e(".datepicker").each(function(t,d){var i=e(this),s=i.closest(".field").find(".datepicker-input").val(),n=i.attr("id");a.instances[n]=t,void 0===a.disableddates[t]&&(a.disableddates[t]=[]),""!==s&&(a.disableddates[t]=s.split(",")),i.datepicker({dateFormat:"dd/mm/yy",beforeShowDay:a.disableSpecificDates,onSelect:function(e,d){var s=i.closest(".field"),l=s.find(".datepicker-input"),r="",c="";i.val(""),a.disableddates[t]=a.pushDDates(a.disableddates[t],e),s.find(".datepicker-tags").append('<div class="tag">\t<span class="dateText">'+e+'</span>    <span class="close">x</span></div>'),r=a.getDateTextSelected(n),a.disableddates[t].length>0&&(c=a.disableddates[t][0]),l.val(r),a.updateFirstDDateInput(s,a.disableddates[t])},onClose:function(e,t){i.datepicker("refresh")}})}),e(".datepicker-tags").on("click",".close",a.closeDtTag)},getDateTextSelected:function(e){for(var a="",d=t.instances,i=t.disableddates[d[e]],s=i.length,n=0;n<s;n++)a+=i[n],n<s-1&&(a+=",");return a},disableSpecificDates:function(a){var d=e.datepicker.formatDate("dd/mm/yy",a),i=e(this).attr("id"),s=t.instances[i],n=t.disableddates[s];return[n.indexOf(d)==-1]},updateFirstDDateInput:function(e,t){var a=e.find(".datepicker-finput"),d="";t.length>0?(d=t[0].toString().split("/"),a.val(d[2]+"-"+d[1]+"-"+d[0])):a.val("")},pushDDates:function(e,t){var a=t.split("/");if(dateCurrent=new Date(a[2]+"-"+a[1]+"-"+a[0]),date=null,k=0,length=e.length,length>0){for(var d=0;d<length;d++){if(a=e[d].split("/"),date=new Date(a[2]+"-"+a[1]+"-"+a[0]),date>dateCurrent){k=d;break}k=d+1}e.splice(k,0,t)}else e.push(t);return e},closeDtTag:function(a){var d=e(this).closest(".tag"),i=d.closest(".field"),s=i.find(".datepicker-input"),n=i.find(".datepicker").attr("id"),l=d.find(".dateText").text().trim(),r="",c=t.instances[n],p=t.disableddates[c],f=p.findIndex(function(e){return e===l});f!==-1&&(p.splice(f,1),r=t.getDateTextSelected(n),s.val(r),d.remove()),t.updateFirstDDateInput(i,p)}};t.ready()});