jQuery(function(e){var t={index:0,ready:function(){e(document).on("click",".field_media_widget_remove",this.removeCustomFieldMedia).on("click",".media_upload",this.uploadMedia).on("click",".field_media_widget_add",this.addCustomFieldMedia)},addCustomFieldMedia:function(i){i.preventDefault();var a=e(this).closest(".metabox_field"),d=a.find(".field:nth-child(5)").clone(),n=e(this).attr("data-image-path")+"/widget_remove.png",l="";d.find(".media_field_metabox").val("").attr("src",""),d.find("> div:last-child").append('<img src="'+n+'" class="field_media_widget_remove vmiddle cpointer" />'),d.find("input[type=text]").each(function(i,a){var d=e(a).attr("name").toString(),n=d.split("[0]");e(a).attr("name",d.replace(d,n[0]+"["+(t.index+1)+"]"+n[1]))}),l='<div class="field mtop10" data-index="'+(t.index+1)+'">'+d.html()+"</div>",a.append(l),t.index++},removeCustomFieldMedia:function(i){i.preventDefault();var a=e(this).closest(".metabox_field"),d=0;e(this).closest(".field").remove(),t.index--,a.find(".field").each(function(t,i){var a=e(i),n=a.attr("data-index");a.find("input[type=text]").each(function(t,i){var a=e(i),l=a.attr("name").toString(),o=l.split("["+n+"]");a.attr("name",l.replace(l,o[0]+"["+d+"]"+o[1]))}),a.attr("data-index",d),d++})},uploadMedia:function(t){t.preventDefault();var i=e(this).closest(".field"),a=i.find(".thumbnail_media_field_metabox"),d=i.find(".media_field_metabox.thumbnail"),n=wp.media({title:"Select Media",button:{text:"Upload Image"},multiple:!1}).on("select",function(){var e=n.state().get("selection").first().toJSON();a.length>0&&a.attr("src",e.url),d.val(e.url)}).open()}};t.ready()});